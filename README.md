# 🤍 数码宝贝 - 功能说明

## 📱 完整功能介绍

### 一、妈妈端（主要功能）

#### 1️⃣ 登录/注册页面
- 输入名字即可登录（例如：张妈妈、李阿姨）
- 新用户：进入初始化页面
- 老用户：直接进入聊天界面，加载历史记录

#### 2️⃣ 初始化页面（仅新用户）
填写孩子的信息：
- 孩子性别
- 孩子年龄段（学生/刚工作/工作多年）
- 聊天方式偏好
- 孩子昵称（可选）
- 孩子描述（可选）
- 上传聊天记录（可选）

#### 3️⃣ 聊天界面
- WhatsApp 风格的聊天窗口
- 消息旁边显示名字：
  - 妈妈的消息 → "妈妈"
  - AI 的消息 → 孩子的昵称
- 右上角有"⚙️ 修改设置"按钮
- 所有聊天记录自动保存

---

### 二、子女端（周报功能）✨ 新功能

#### 1️⃣ 子女登录入口
- 在登录页面右下角有"👦 子女登录"按钮
- 点击进入子女登录页面

#### 2️⃣ 子女登录页面
- 输入妈妈的名字
- 点击"查看周报"

#### 3️⃣ 周报页面
AI 会自动分析妈妈最近的聊天记录，生成温暖的周报：

**周报内容包括：**
- 📝 妈妈最近主要聊了什么话题
- 😊 妈妈的情绪和状态如何
- ⚠️ 有什么值得关注的事情
- 💡 给真实子女的建议（如何更好地关心妈妈）

**特殊情况：**
- 如果妈妈还没有聊天记录，会提示"妈妈最近还没有和孩子聊天呢"
- 如果找不到该用户，会提示"没有找到记录"

---

## 🎯 使用场景

### 场景一：妈妈日常使用
1. 妈妈登录 → 和 AI（扮演孩子）聊天
2. 聊天内容自动保存
3. 下次登录自动加载历史记录

### 场景二：子女查看周报
1. 子女点击"子女登录"
2. 输入妈妈的名字
3. 查看 AI 生成的周报
4. 了解妈妈最近的状态和需求
5. 根据建议更好地关心妈妈

---

## 🚀 如何运行

```bash
# 1. 设置 Deepseek api Key

# 2. 激活虚拟环境
source .venv/bin/activate

# 3. 运行应用
python app.py

# 4. 访问
# http://0.0.0.0:7860
```

---

## 💾 数据存储

所有数据保存在 `histories/` 目录下：
- 文件名：`用户名.json`
- 内容：聊天记录 + 孩子配置信息

示例：
```
histories/
  ├── 张妈妈.json
  ├── 李阿姨.json
  └── 王妈妈.json
```

---

## 🎨 界面流程图

```
登录页面
  ├─ 妈妈登录 → 初始化/聊天
  └─ 子女登录 → 输入妈妈名字 → 查看周报
```

---

## 💡 温馨提示

1. **隐私保护**：所有数据仅保存在本地
2. **API 费用**：使用 gpt-4o-mini 模型，费用很低
3. **周报更新**：每次查看都会重新生成最新的周报
4. **聊天记录**：建议定期备份 `histories/` 目录

